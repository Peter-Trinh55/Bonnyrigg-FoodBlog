{% extends "layout.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3 mb-0">Categories</h1>
    <a class="btn btn-outline-dark btn-pill" href="{{ url_for('recipes.recipe_list') }}">View all recipes</a>
  </div>

  <div class="row g-3">
    {% for t in tiles %}
    <hr class="my-4">

<h2 class="h4 mb-2">Popular tags</h2>
<div class="d-flex flex-wrap gap-2 mb-4">
  {% for t in top_tags %}
    <a class="tag-chip" href="{{ url_for('recipes.recipe_list', tag=t) }}">#{{ t }}</a>
  {% endfor %}
</div>

<h2 class="h4 mb-3">Latest recipes</h2>
<div class="row g-3">
  {% for r in latest %}
    <div class="col-md-6 col-lg-4">
      <div class="card h-100">
        <img src="{{ url_for('static', filename='recipe_pics/' ~ r.image_file) }}" class="card-img-top" alt="Recipe image">
        <div class="card-body">
          <h5 class="card-title mb-1">{{ r.title }}</h5>
          {% if r.summary %}<p class="text-muted mb-2">{{ r.summary }}</p>{% endif %}
          <a class="btn btn-outline-dark btn-sm btn-pill" href="{{ url_for('recipes.recipe_detail', recipe_id=r.id) }}">View recipe</a>
        </div>
      </div>
    </div>
  {% endfor %}
      </div>
      <div class="col-md-6 col-lg-4">
        <a class="cat-tile"
           href="{{ url_for('recipes.recipe_list', **t.q) }}">
          <img class="cat-img" src="{{ url_for('static', filename='category_pics/' ~ t.img) }}" alt="{{ t.title }}">
          <div class="cat-overlay">
            <div class="cat-title">{{ t.title }}</div>
            <div class="cat-sub">Browse recipes</div>
          </div>
        </a>
      </div>
    {% endfor %}
  </div>
{% endblock %}
